/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C2*/SET SCHEMA PUBLIC
drop table share if exists
drop table request if exists
drop table record if exists
drop table expensive_request if exists
drop table user_role if exists
drop table deposit_req if exists
drop table stock if exists
drop table pending_stock if exists
drop table config if exists
drop table user if exists
create table user (\u000a    id integer not null,\u000a    password varchar(100) not null,\u000a    name varchar(100) not null,\u000a    family varchar(100) not null,\u000a    balance integer not null,\u000a    primary key (id)\u000a)
create table user_role (\u000a    id  integer not null,\u000a    role varchar(20) not null,\u000a    foreign key(id) references user(id),\u000a    primary key (id,role)\u000a)
create table stock (\u000a    id varchar(20) not null,\u000a    owner_id integer not null,\u000a    foreign key(owner_id) references user(id),    \u000a    primary key (id)\u000a)
create table pending_stock (\u000a    id varchar(20) not null,\u000a    owner_id integer not null,\u000a    foreign key(owner_id) references user(id),\u000a    primary key (id)\u000a)
create table share (\u000a    stock_id varchar(20) not null,\u000a    user_id  integer not null,\u000a    quantity integer not null,\u000a    primary key (stock_id,user_id),    \u000a    foreign key(stock_id) references stock(id),\u000a    foreign key(user_id) references user(id)\u000a)
create table request (\u000a    id integer not null,\u000a    stock_id varchar(20) not null,\u000a    user_id integer not null,\u000a    quantity integer not null,\u000a    price integer not null,\u000a    request_type varchar(4) not null,\u000a    op_type varchar(3) not null,\u000a    primary key (id),\u000a    foreign key(stock_id) references stock(id),\u000a    foreign key(user_id) references user(id)\u000a)
create table expensive_request (\u000a    id integer not null,\u000a    stock_id varchar(20) not null,\u000a    user_id integer not null,\u000a    quantity integer not null,\u000a    price integer not null,\u000a    request_type varchar(4) not null,\u000a    op_type varchar(3) not null,\u000a    primary key (id),\u000a    foreign key(stock_id) references stock(id),\u000a    foreign key(user_id) references user(id)\u000a)
create table record (\u000a    id integer not null,\u000a    stock_id varchar(20) not null,\u000a    seller_id integer not null,\u000a    buyer_id integer not null,\u000a    quantity integer not null,\u000a    price integer not null,\u000a    seller_balance integer not null,\u000a    buyer_balance integer not null,\u000a    op_type varchar(3) not null,\u000a    reg_date timestamp not null,\u000a    primary key (id),\u000a    foreign key(stock_id) references stock(id),\u000a    foreign key(seller_id) references user(id),\u000a    foreign key(buyer_id) references user(id)\u000a)
create table deposit_req (\u000a    id integer not null,\u000a    user_id integer not null,\u000a    amount integer not null,\u000a    foreign key(user_id) references user(id),\u000a    primary key (id)\u000a)
create table config (\u000a    name varchar(20) not null,\u000a    value varchar(20) not null,\u000a    primary key (name)\u000a)
INSERT INTO USER VALUES(1,'admin','admin','adminy',0)
COMMIT
INSERT INTO USER_ROLE VALUES(1,'admin')
COMMIT
